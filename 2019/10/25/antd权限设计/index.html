<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>just blue.</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
  <body>
    <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">just blue.</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">Archives</a>
        </li>
      
        <li class="menu-item">
          <a href="/tags" class="menu-item-link">TAGS</a>
        </li>
      
        <li class="menu-item">
          <a href="/friends" class="menu-item-link">FRIENDS</a>
        </li>
      
    </ul>
  </nav>
</header>

    <main class="main">
      <article class="post">
  <div class="post-title">
    <h2 class="title">antd权限设计</h2>
  </div>
   <div class="post-meta">
    <span class="post-time">2019-10-25</span>
  </div>
  <div class="post-content">
    <h1 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h1><p>菜单权限: 每个角色能看见的菜单不一样<br>数据权限: 每个角色能进行的操作不一样(同一个页面,每个角色能看到的控件是不一样的)<br>每个角色对每个资源操作是不一样的<br>设计时就限定每个角色的数据权限</p>
<p>资源表信息<br>path 访问路径 /<br>name  描述 index<br>meta { title: ‘仪表盘’, keepAlive: true, icon: bxAnaalyse, permission: [ ‘dashboard’ ] }<br>资源的名字,图标,是否缓存,权限标识<br>redirect 实际跳转路径<br>meta 的 permission 表示是否有此路由查看权限</p>
<a id="more"></a>
<h1 id="二、表设计"><a href="#二、表设计" class="headerlink" title="二、表设计"></a>二、表设计</h1><h2 id="用户表-account"><a href="#用户表-account" class="headerlink" title="用户表 account"></a>用户表 account</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"account"</span> (</span><br><span class="line">  <span class="string">"id"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'主键自增id'</span>,</span><br><span class="line">  <span class="string">"name"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'昵称'</span>,</span><br><span class="line">  <span class="string">"username"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'登录名'</span>,</span><br><span class="line">  <span class="string">"password"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'登录密码'</span>,</span><br><span class="line">  <span class="string">"avatar"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户头像路径'</span>,</span><br><span class="line">  <span class="string">"status"</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'状态标识,0锁定,1有效'</span>,</span><br><span class="line">  <span class="string">"telephone"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'手机号'</span>,</span><br><span class="line">  <span class="string">"lastLoginIp"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'最后登录ip'</span>,</span><br><span class="line">  <span class="string">"lastLoginTime"</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'最后登录时间'</span>,</span><br><span class="line">  <span class="string">"creatorId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建人id'</span>,</span><br><span class="line">  <span class="string">"createTime"</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">"merchantCode"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品代码'</span>,</span><br><span class="line">  <span class="string">"deleted"</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识 0有效,1删除'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">"id"</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">2</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`account`</span> </span><br><span class="line">(<span class="string">`id`</span>, <span class="string">`name`</span>, <span class="string">`username`</span>, <span class="string">`password`</span>, <span class="string">`avatar`</span>, <span class="string">`status`</span>, <span class="string">`telephone`</span>, <span class="string">`lastLoginIp`</span>, <span class="string">`lastLoginTime`</span>, <span class="string">`creatorId`</span>, <span class="string">`createTime`</span>, <span class="string">`merchantCode`</span>, <span class="string">`deleted`</span>) </span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">'1'</span>, <span class="string">'天野远子'</span>, <span class="string">'admin'</span>, <span class="string">'21232f297a57a5a743894a0e4a801fc3'</span>, <span class="string">'https://gw.alipayobjects.com/zos/rmsportal/jZUIxmJycoymBprLOUbT.png'</span>, <span class="string">'1'</span>, <span class="string">'13888888888'</span>, <span class="string">'27.154.74.117'</span>, <span class="string">'2019-10-18 09:38:34'</span>, <span class="string">'1'</span>, <span class="string">'2019-10-18 09:38:51'</span>, <span class="string">'TLif2btpzg079h15bk'</span>, <span class="string">'0'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="角色表-role"><a href="#角色表-role" class="headerlink" title="角色表 role"></a>角色表 role</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"role"</span> (</span><br><span class="line">  <span class="string">"id"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'主键id'</span>,</span><br><span class="line">  <span class="string">"name"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'权限名称'</span>,</span><br><span class="line">  <span class="string">"nickname"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'昵称'</span>,</span><br><span class="line">  <span class="string">"describe"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'权限说明'</span>,</span><br><span class="line">  <span class="string">"status"</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'状态标识 0锁定 1有效'</span>,</span><br><span class="line">  <span class="string">"creatorId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建人id'</span>,</span><br><span class="line">  <span class="string">"createTime"</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">"deleted"</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'删除标识 0 有效 1 删除'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">"id"</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">2</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role`</span> </span><br><span class="line">(<span class="string">`id`</span>, <span class="string">`name`</span>, <span class="string">`nickname`</span>, <span class="string">`describe`</span>, <span class="string">`status`</span>, <span class="string">`creatorId`</span>, <span class="string">`createTime`</span>, <span class="string">`deleted`</span>) </span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">'1'</span>, <span class="string">'admin'</span>, <span class="string">'管理员'</span>, <span class="string">'拥有所有权限'</span>, <span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'2019-10-18 09:39:54'</span>, <span class="string">'0'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="用户角色关联表-account-role"><a href="#用户角色关联表-account-role" class="headerlink" title="用户角色关联表 account_role"></a>用户角色关联表 account_role</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"account_role"</span> (</span><br><span class="line">  <span class="string">"userId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</span><br><span class="line">  <span class="string">"roleId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'角色id'</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`account_role`</span> (<span class="string">`userId`</span>, <span class="string">`roleId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="权限定义表-permission"><a href="#权限定义表-permission" class="headerlink" title="权限定义表 permission"></a>权限定义表 permission</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"permission"</span> (</span><br><span class="line">  <span class="string">"id"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'主键id'</span>,</span><br><span class="line">  <span class="string">"permissionName"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'权限描述'</span>,</span><br><span class="line">  <span class="string">"permissionDesc"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'描述'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">"id"</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">12</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'dashboard'</span>, <span class="string">'仪表盘'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'form'</span>, <span class="string">'表单权限'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'table'</span>, <span class="string">'表格权限'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'profile'</span>, <span class="string">'详细页权限'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'result'</span>, <span class="string">'结果权限'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'6'</span>, <span class="string">'exception'</span>, <span class="string">'异常页面权限'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'7'</span>, <span class="string">'user'</span>, <span class="string">'用户管理'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'8'</span>, <span class="string">'support'</span>, <span class="string">'超级模块'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'9'</span>, <span class="string">'order'</span>, <span class="string">'订单管理'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'10'</span>, <span class="string">'permission'</span>, <span class="string">'权限管理'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`permission`</span> (<span class="string">`id`</span>, <span class="string">`permissionName`</span>, <span class="string">`permissionDesc`</span>) <span class="keyword">VALUES</span> (<span class="string">'11'</span>, <span class="string">'role'</span>, <span class="string">'角色管理'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="操作列表-actions"><a href="#操作列表-actions" class="headerlink" title="操作列表 actions"></a>操作列表 actions</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"actions"</span> (</span><br><span class="line">  <span class="string">"id"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'主键id'</span>,</span><br><span class="line">  <span class="string">"action"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'操作'</span>,</span><br><span class="line">  <span class="string">"describe"</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'操作说明'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">"id"</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">8</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'add'</span>, <span class="string">'新增'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'get'</span>, <span class="string">'详情'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'query'</span>, <span class="string">'查询'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'update'</span>, <span class="string">'修改'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'delete'</span>, <span class="string">'删除'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'6'</span>, <span class="string">'import'</span>, <span class="string">'导入'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`actions`</span> (<span class="string">`id`</span>, <span class="string">`action`</span>, <span class="string">`describe`</span>) <span class="keyword">VALUES</span> (<span class="string">'7'</span>, <span class="string">'export'</span>, <span class="string">'导出'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="角色权限关联-role-permission"><a href="#角色权限关联-role-permission" class="headerlink" title="角色权限关联 role_permission"></a>角色权限关联 role_permission</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"role_permission"</span> (</span><br><span class="line">  <span class="string">"roleId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'角色id'</span>,</span><br><span class="line">  <span class="string">"permissionId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'权限id'</span>,</span><br><span class="line">  <span class="string">"actionId"</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'表名角色拥有哪些菜单的查看权限'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'10'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'11'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'3'</span>, <span class="string">'6'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'6'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'5'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'9'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'10'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'10'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'10'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'10'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'11'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'11'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'11'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'11'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'6'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'7'</span>, <span class="string">'7'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'5'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'6'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`scott`</span>.<span class="string">`role_permission`</span> (<span class="string">`roleId`</span>, <span class="string">`permissionId`</span>, <span class="string">`actionId`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'8'</span>, <span class="string">'7'</span>);</span><br></pre></td></tr></table></figure>

<h1 id="三、流程"><a href="#三、流程" class="headerlink" title="三、流程"></a>三、流程</h1><p>所有的菜单在前端定义好,后端不关心有哪些菜单</p>
<h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><p>登录获得服务器返回的用户token,保存到 storage (通过vue-ls)<br>将token 保存在 state user模块 的 token</p>
<h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><p>登录后跳转,触发 route.beforeEach方法,获取用户权限信息<br>如果store中没有用户的权限信息,则调用 action分发 GetInfo 取一次<br>使用 permissions.map 将操作 action 提取出成为一个数组</p>
<h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2><p>判断 actionEntitySet是否为空<br>不为空, actionEntitySet.map,将 actionList 设置为 操作数组<br>将 permissoinList 设置为 权限数组</p>
<h2 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h2><p>用户权限 state-&gt;user-&gt;roles<br>用户信息 state-&gt;user-&gt;info<br>用户昵称 state-&gt;user-&gt;name<br>用户头像 state-&gt;user-&gt;avatar</p>
<h2 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h2><p>取到后,将用户权限当参数传递给 action分发 GenerateRoutes,生成动态路由</p>
<h2 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h2><p>将系统所有的菜单 和 用户权限传入 filterAsyncRouter<br>嵌套循环 有10项菜单,10个route<br>循环菜单,取出每一项 route</p>
<h2 id="7"><a href="#7" class="headerlink" title="7."></a>7.</h2><p>将 permissionList 和 route 传入 hasPermission<br>循环 permissionList,看 route.meta.permission 是否包含 permissionList中的项<br>如果包含,则表示用户可以看到此菜单，递归调用,因为 route 会含有 childrens</p>
<h2 id="8"><a href="#8" class="headerlink" title="8."></a>8.</h2><p>将包含的路由 添加到 accessRouters<br>将 用户可访问的路由 保存至 state 的 addrouters</p>
<h2 id="9"><a href="#9" class="headerlink" title="9."></a>9.</h2><p>用户可以访问的路由 = 基础路由 + addrouters</p>

  </div>
</article>
    </main>
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>
</html>